/*
* AnchorTab (http://www.niumowang.org/js/anchortab/)
* Version : 1.0
* Author : pizi , ok8008@yeah.net
*/
(function(){var f=function(b){this.params=b||{};this.speed=this.params.speed||50;this.follow=this.params.follow.replace('#','');this.sectionArray=this.params.section.replace('#','').split(" ");this.navArray=this.params.nav.replace('#','').split(" ");this.sectionWrap=this.sectionArray[0]||'section_wrap';this.section=this.sectionArray[1]||'section';this.navWrap=this.navArray[0]||'nav';this.navNode=this.navArray[1]||'a';this.followTop=document.getElementById(this.follow).offsetTop;this.topArray=new Array();this.sec=document.getElementById(this.sectionWrap).getElementsByTagName(this.section);for(var d=0;d<this.sec.length;d++){this.top=this.sec[d].offsetTop;this.topArray.push(this.top)};this.nodes=document.getElementById(this.navWrap).getElementsByTagName(this.navNode);for(var e=0;e<this.nodes.length;e++){var c=this;(function(a){c.nodes[e].onclick=function(){c.bodyTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;c.scrollFn(0,c.bodyTop,c.topArray[a]-c.bodyTop,c.speed);return false}})(e)};this.init()};f.prototype={init:function(){var a=this;if(window.addEventListener){window.addEventListener("scroll",function(){a.move.call(a);if(a.follow){a.followFn()}},false)}else{window.attachEvent("onscroll",function(){a.move.call(a);if(a.follow){a.followFn()}})}},move:function(){var a=this;a.bodyTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;a.nowIndex=a.getIndex(a.bodyTop);a.navSelect(a.nowIndex)},getIndex:function(a){var b=this;a+=20;for(i=0;i<b.sec.length;i++){if(i==b.sec.length-1){if(b.topArray[i]<=a)return i}else{if(b.topArray[i]<=a&&b.topArray[i+1]>a){return i}}}},navSelect:function(a){var b=this;for(var d=0;d<b.nodes.length;d++){b.reg=new RegExp('(\\s|^)selected(\\s|$)');b.nodes[d].className=b.nodes[d].className.replace(b.reg,'')}b.nodes[a].className+=' selected'},scrollFn:function(a,b,d,e){var c=this;clearTimeout(c.timer);function g(){if(a<e){a++;c.moTop=Math.ceil(d*a/e+b);window.scrollTo(0,c.moTop);c.timer=setTimeout(g,10)}else{window.scrollTo(0,d+b)}}g()},followFn:function(){var a=this;a.nowFollowTop=document.getElementById('nav').offsetTop;if(a.bodyTop>=a.followTop){if(!-[1,]&&!window.XMLHttpRequest){clearTimeout(a.timerS);document.getElementById('nav').style.display='none';a.timerS=setTimeout(function(){document.getElementById('nav').style.display='block';document.getElementById('nav').style.top=a.bodyTop+'px'},200)}}}};window.AnchorTab=f})();